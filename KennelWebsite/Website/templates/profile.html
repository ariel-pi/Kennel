{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}


{% block title %}User Profile - Dog Boarding{% endblock %}

{% block content %}
    <!DOCTYPE html>
    <html>
    <head>
        <title>User Profile</title>
    </head>
    <body>
        <h1>User Profile</h1>
        <div>
            <h2>Username: {{ profile.user.username }}</h2>
            <p>First Name: {{ profile.user.first_name }}</p>
            <p>Last Name: {{ profile.user.last_name }}</p>
            <p>Email: {{ profile.user.email }}</p>

            {% if profile.profile_picture %}
                <img src="{{ profile.profile_picture.url }}" alt="Profile Picture">
            {% else %}
                <p>No profile picture available</p>
            {% endif %}
        </div>
        <a href="{% url 'update_username' %}">Update Username</a></br>
        <a href="{% url 'update_password' %}">Update Password</a>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {% if profile.profile_picture %}
                <button type="submit">Change Profile Picture</button>
            {% else %}
                <button type="submit">Upload Profile Picture</button>
            {% endif %}
            {{ form.as_p }}
        </form>
        {% if profile.user|has_group:"Customers" %}
            <h>My Dogs</h>
            <ul>
                {% for dog in dogs %}
                    <li>
                        <strong>Name:</strong> {{ dog.name }}<br>
                        <a href="{% url 'dog_detail' dog.chip_id %}">View Details</a>
                    
                    </li>
                {% empty %}
                    <li>No dogs available.</li>
                {% endfor %}
            </ul>
            <a href="{% url 'add_dog' %}">Add Dog</a>
        {% endif %}
            
    </body>
    </html>
{% endblock %}
